<template>
  <el-skeleton animated :loading="isLoading">
    <template v-slot:template>
      <div class="we-chat-item-container flex" loading @mouseenter="onHover" @mouseleave="onDisHover">
        <div class="avatar">
          <el-skeleton-item variant="circle" style="height: 52px;width: 52px"/>
        </div>
        <div class="we-container flex f-col">
          <div class="userName flex al-c">
            <el-skeleton-item variant="text" style="width: 100px;margin-right: 10px"/>
            <el-skeleton-item variant="text" style="width: 200px"/>
          </div>
          <div class="content">
            <el-skeleton-item variant="text"/>
            <el-skeleton-item variant="text"/>
            <el-skeleton-item variant="text"/>
            <el-skeleton-item variant="text"/>
          </div>
        </div>
        <div class="hover-mask">
          <!-- hover è’™ç‰ˆ -->
          <div class="mask-container f-jc-c al-c" :class="{'animate__animated animate__bounceIn':isHover}">
            <icon-font name="iconyanjing" right="5px" size="25px"/>
            <span>æŸ¥çœ‹è¯¦æƒ…</span>
          </div>
        </div>
      </div>
    </template>
    <template v-slot:default>
      <div class="we-chat-item-container flex" @mouseenter="onHover" @mouseleave="onDisHover">
        <div class="avatar">
          <el-avatar :size="52">å°ç¾</el-avatar>
        </div>
        <div class="we-container flex f-col">
          <div class="userName flex al-c">
            <span style="font-weight: 600" class="none-select">å°ç¾</span>
            <maxer-badge title="åˆ›å§‹äºº"
                         :left="5"
                         is-icon
                         content="ç”± Maxer é¢å‘çš„åˆ›ä¸–ğŸ–"
                         color="danger"
                         icon="iconicon_user"/>
            <maxer-badge title="è¶…çº§èµåŠ©ç”¨æˆ·" :left="5" content="ç”± Maxer é¢å‘çš„ç‚’é¸¡èµåŠ©ç”¨æˆ·ğŸ–"/>
            <maxer-badge title="è´µå®¾"
                         :left="5"
                         is-icon
                         content="ç”± Maxer é¢å‘çš„è´µå®¾ğŸ–"
                         color="warning"
                         icon="icongeren"/>
          </div>
          <div class="content">
            è¿‡å¹´ä¸å›å®¶äº†ï¼Œä»Šå¹´æ˜¯ç¬¬äºŒå¹´ä¸è·Ÿçˆ¶æ¯ä¸€èµ·è¿‡ï¼ˆå»å¹´ç–«æƒ…ä¸¥é‡å°±æœæ–­æ²¡å›å®¶ï¼‰ï¼Œç»™çˆ¸å¦ˆçš„æ–°å¹´ç¤¼ç‰©æ˜¯ä¹°äº†Amazfit Pop
            Proæ™ºèƒ½æ‰‹è¡¨å¥—è£…ã€‚æˆ‘çˆ¸å¦ˆå›å®¶å–œæ¬¢æŠŠæ‰‹æœºæ‰”æˆ¿é—´é‡Œï¼Œç»å¸¸æ¥ä¸åˆ°ç”µè¯å’Œé€šçŸ¥ï¼Œæˆ´å—è¡¨å°±å¯ä»¥æ— éšœç¢æé†’äº†ï¼Œè€Œä¸”å¯ä»¥è®°å½•å¿ƒç‡ã€ç¡çœ å¥åº·ä»¥åŠ50ç±³é˜²æ°´ï¼ˆæˆ‘çˆ¸å–œæ¬¢æ¸¸æ³³ã€æ‰“çƒç­‰è¿åŠ¨ï¼‰ï¼Œè¯¥æœ‰çš„åŠŸèƒ½éƒ½æœ‰ï¼Œæ¯”èµ·æ™ºèƒ½æ‰‹ç¯ï¼Œè¿˜æ˜¯é€‰æ‰‹è¡¨æ›´é€‚åˆé•¿è¾ˆå§ï¼Œæ¯•ç«Ÿæ‰‹ç¯çš„å­—å·çœŸçš„å¤ªå°äº†ï¼Œæ˜¾ç¤ºå†…å®¹ä¹Ÿä¸å¤šï¼Œå¾…æœºæ—¶é—´è¶…è¿‡ä¸€å‘¨ä¹Ÿæ˜¯æˆ‘é€‰æ‹©è¿™æ¬¾çš„åŸå› ã€‚
          </div>
        </div>
        <div class="hover-mask">
          <!-- hover è’™ç‰ˆ -->
          <div class="mask-container f-jc-c al-c" :class="{'animate__animated animate__jackInTheBox':isHover}">
            <icon-font name="iconyanjing" right="5px"/>
            <span class="none-select">æŸ¥çœ‹è¯¦æƒ…</span>
          </div>
        </div>
      </div>
    </template>
  </el-skeleton>
</template>

<script lang="ts">
import {defineComponent} from 'vue';
import MaxerBadge from "@/components/MaxerBadge.vue";
import IconFont from "@/components/IconFont.vue";

export default defineComponent({
  name: "WeChatItem",
  components: {IconFont, MaxerBadge},
  data() {
    return {
      isHover: false,
      isLoading: true
    }
  },
  methods: {
    onHover() {
      this.isHover = true;
    },
    onDisHover() {
      this.isHover = false;
    }
  },
  mounted() {
    setTimeout(() => this.isLoading = false, 4000);
  }
})
</script>

<style lang="scss" scoped>
.we-chat-item-container {
  position: relative;
  margin-bottom: 15px;
  padding: 10px;
  border-radius: 15px;
  transition: background-color .3s ease-out;
  -webkit-transition: background-color .3s ease-out;

  &[loading]:hover{
    background-color: transparent;
    cursor: not-allowed;
    .hover-mask{
      opacity: 0;
      visibility: hidden;
    }
  }

  &:hover {
    background-color: #eee;
    cursor: pointer;

    .hover-mask {
      opacity: 1;
      visibility: visible;
      transition: opacity .3s ease-in-out, visibility .3s ease-in-out;
      -webkit-transition: opacity .3s ease-in-out, visibility .3s ease-in-out;
    }
  }

  &:last-child {
    margin-bottom: 0;
  }

  .hover-mask {
    position: absolute;
    opacity: 0;
    visibility: hidden;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    border-radius: 15px;
    background-color: rgba(238, 238, 238, .6);
    overflow: hidden;
    transition: opacity .3s ease-in-out, visibility .3s ease-in-out;
    -webkit-transition: opacity .3s ease-in-out, visibility .3s ease-in-out;

    .mask-container {
      height: 100%;
      font-size: 20px;
    }
  }

  .avatar {
    user-select: none;
    -webkit-user-select: none;
  }

  .we-container {
    padding: 0 10px;
    flex: 1;

    .userName {
      font-size: 17px;
      padding: 8px 0;
    }

    .content {
      font-size: 15px;
      line-height: 160%;
      color: #343a40;
    }
  }
}
</style>